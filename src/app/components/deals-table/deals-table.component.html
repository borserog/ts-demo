<section class="card shadow-2xl p-6 border-[1px] border-slate-300 w-full"
         xmlns="http://www.w3.org/1999/html">
  <div class="overflow-x-auto">
    <table aria-describedby="Deals Listing" class="table table-xs">
      <!-- head -->
      <thead>
      <tr>
        <th></th>
        <th>Deal Name</th>
        <th>Purchase Price</th>
        <th>Type</th>
        <th>
          NOI
        </th>
        <th>Cap Rate</th>
      </tr>
      </thead>
      <tbody>
        @for (deal of dealsList$ | async; track deal.id) {
          <tr class="hover:bg-slate-200 cursor-pointer">
            <th [id]="deal.id">{{ deal.id }}</th>
            <td class="truncate">{{ deal.name }}</td>
            <td class="[&>small]:text-xs">
              <ng-container
                *ngTemplateOutlet="typeBadge; context:{ type: deal.type} ">
              </ng-container>
            </td>
            <td>{{ deal.purchasePrice | currency }}</td>
            <td>{{ deal.netOperationalIncome | currency }}</td>
            <td>{{ (deal.netOperationalIncome / deal.purchasePrice) | percent }}</td>
          </tr>
        }
      </tbody>
    </table>
  </div>
</section>


<ng-template #typeBadge let-dealType="type">
  @switch (dealType) {
    @case ('Acquisition') {
      <small class="badge badge-success">{{ dealType }}</small>
    }
    @case ('Lease') {
      <small class="badge badge-info">{{ dealType }}</small>
    }
    @case ('Development') {
      <small class="badge badge-warning">{{ dealType }}</small>
    }
    @default {
      <small class="badge badge-ghost">{{ dealType }}</small>
    }
  }
</ng-template>
